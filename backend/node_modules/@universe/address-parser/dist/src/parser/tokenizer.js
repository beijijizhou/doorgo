import { StreetType, UnitAbbr } from '@universe/models';
import { isState } from '../data/State.js';
import { isStreetType } from '../data/StreetType.js';
import { isNumerical, isOrder, orderToOrdinal, titleCase } from './utils.js';
// import { isFacilityType } from '../FacilityType';
// import { isUnitAbbr } from '../UnitAbbr';
// /* eslint-disable */
// TODO: Spell Check Integration?
// const Typo = require("typo-js");
// const dictionary = new Typo('en_US');
// /* eslint-enable */
const alphas = new Set([
    'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O',
    'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z',
    'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o',
    'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z',
]);
const decimals = new Set([
    '0', '1', '2', '3', '4', '5', '6', '7', '8', '9',
]);
// https://pe.usps.com/text/pub28/28c3_019.htm
const legalChars = new Set([...alphas, ...decimals]);
const newlines = new Set([',', '\t', '\n']);
const dashes = new Set(['-', '–', '—']);
const slashes = new Set(['\\', '/']);
// Special non-enumerated abbreviations we want to make sure we capitalize
// https://en.wikipedia.org/wiki/Ship_prefix
const capitalize = new Set(['AFB', 'APO', 'FPO', 'AECOM', 'HQBN',
    // https://en.wikipedia.org/wiki/List_of_colloquial_names_for_universities_and_colleges_in_the_United_States
    'AFA', 'A&M', 'A&T', 'APSU', 'ALASU', 'ASU', 'AU', 'AUM', 'BC', 'BGSU', 'BHSU', 'BJU', 'BMC', 'BSC', 'BSU', 'BU',
    'BYU', 'CBU', 'CC', 'CCNY', 'CCSU', 'CCU', 'CCV', 'CGU', 'CIA', 'CMC', 'CMU', 'CNU', 'CSB', 'SJU', 'CSE', 'CSI',
    'CSU', 'CSUF', 'CSUEB', 'CSULA', 'CSUS', 'CU', 'CUA', 'CUNY', 'DC', 'DPU', 'DSU', 'DU', 'ECU', 'EIU', 'EMU', 'EMU',
    'ENC', 'ETSU', 'EWU', 'EKU', 'F&M', 'FAMU', 'FAU', 'FC', 'FDU', 'FGCU', 'FIT', 'FIU', 'FPU', 'FSU', 'FU', 'GB', 'GCU',
    'GGC', 'GONZ', 'GSU', 'GT', 'GVSU', 'HIU', 'HMC', 'HU', 'HU', 'HSU', 'IC', 'IIT', 'IPFW', 'ISU', 'IUP', 'IUPUI', 'IWU',
    'IW', 'JHU', 'JMU', 'JWU', 'JSU', 'JU', 'KSU', 'KU', 'KU', 'LC', 'LHU', 'LIU', 'LMU', 'LSU', 'LSSU', 'LTU', 'LU', 'LUC',
    'MCLA', 'MIT', 'MMC', 'MSU', 'MTSU', 'MTU', 'MU', 'MVSU', 'MUW', 'NAU', 'NCCU', 'NCSU', 'ND', 'NDSU', 'NEU', 'NIU', 'NKU',
    'NMSU', 'NMU', 'NSU', 'NU', 'NVU', 'NW', 'NWMSU', 'NYIT', 'NYMC', 'NYU', 'OC', 'OCC', 'OCU', 'ODU', 'OIT', 'ONU', 'ORU',
    'OSU', 'OU', 'PC', 'PCC', 'PLNU', 'POM', 'PSU', 'PTS', 'PVAMU', 'QU', 'RHIT', 'RIC', 'RISD', 'RIT', 'R-MWC', 'RPI', 'RU',
    'RWU', 'RWC', 'SBU', 'SC', 'SCSU', 'SCU', 'SDSM&T', 'SDSU', 'SFSU', 'SHC', 'SIUE', 'SJC', 'SJFC', 'SJSU', 'SJU', 'SLU',
    'SMC', 'SMU', 'SNHU', 'SOSU', 'SPU', 'SRU', 'SSU', 'SU', 'SUI', 'SUU', 'SUNY', 'SWOSU', 'TAMU', 'TAMUCC', 'TCNJ', 'TCU',
    'TSU', 'TTU', 'TU', 'UA', 'UAA', 'UAB', 'UAF', 'UAH', 'UALR', 'UAM', 'UAPB', 'UB', 'UC', 'UCB', 'UCA', 'UCCS', 'UCD', 'UCF',
    'UCI', 'UCLA', 'UCM', 'UCO', 'UCR', 'UCSB', 'UCSC', 'UCSD', 'UCSF', 'UD', 'UDM', 'UDC', 'UF', 'UGA', 'UH', 'UHCL', 'UHD', 'UHS',
    'UHV', 'UIC', 'UIUC', 'UK', 'ULM', 'UL', 'UMB', 'UMBC', 'UMC', 'UMD', 'UMKC', 'UML', 'UMO', 'UMW', 'UNA', 'UNC', 'UNCC',
    'UNCG', 'UNCW', 'UND', 'UNF', 'UNH', 'UNI', 'UNK', 'UNL', 'UNLV', 'UNM', 'UNO', 'UNR', 'UNT', 'UO', 'UOP', 'UP', 'UPIKE',
    'URI', 'USA', 'USAFA', 'USAO', 'USC', 'USCA', 'USD', 'USF', 'USFCA', 'USI', 'USM', 'USU', 'UT', 'UTA', 'UTB/TSC', 'UTC',
    'UTD', 'UTEP', 'UTM', 'UTPB', 'UTRGV', 'UTSA', 'UVA', 'UVM', 'UVU', 'UW', 'UWF', 'UWG', 'UWGB', 'UWM', 'VCU', 'VMI', 'VPI',
    'VSU', 'VTC', 'VU', 'W&J', 'W&L', 'W&M', 'WC', 'WCU', 'WFU', 'WGU', 'WIU', 'WKU', 'WMU', 'WPI', 'WSU', 'WTAMU', 'WVU', 'WVUP',
    'WWU', 'XU', 'XULA', 'YSU', 'YU',
]);
export function isHead(token) {
    return !!(token && token.isHead);
}
export function insertTokenAfter(prev, value) {
    const token = {
        prev,
        next: prev.next,
        value,
        separator: null,
        alphas: (value.match(/[a-zA-Z]/g) || []).length,
        decimals: (value.match(/\d/g) || []).length,
        isEOL: prev.isEOL,
    };
    token.prev.next = token;
    token.prev.isEOL = false;
    token.next && (token.next.prev = token);
    return token;
}
export function insertTokenBefore(next, value) {
    const token = {
        prev: next.prev,
        next,
        value,
        separator: null,
        alphas: (value.match(/[a-zA-Z]/g) || []).length,
        decimals: (value.match(/\d/g) || []).length,
        isEOL: false,
    };
    token.prev && (token.prev.next = token);
    token.next && (token.next.prev = token);
    return token;
}
export function isNumberOrCode(pointer) {
    if (!pointer) {
        return false;
    }
    const working = {
        value: typeof pointer === 'string' ? pointer : pointer.value,
        decimals: typeof pointer === 'string' ? pointer.match(/\d/g)?.length || 0 : pointer.decimals,
        alphas: typeof pointer === 'string' ? pointer.toLowerCase().match(/[^\d]/g)?.length || 0 : pointer.alphas,
        prev: null,
        separator: typeof pointer === 'string' ? '' : pointer.separator,
    };
    if (working.separator === '&') {
        return false;
    }
    // If string starts with a number, this is a code. Ex: Ordinals (1st, 2nd, etc)
    if (working.value && working.value[0].match(/^\d/)) {
        return true;
    }
    // Dashed one, two and three character alpha strings *are* codes!
    if (working.alphas <= 3 && !working.decimals && (dashes.has(working.separator || '') || dashes.has(pointer.prev?.separator || ''))) {
        return true;
    }
    // If decimals equal or outnumber alphas, or this is a single character string, is a code.
    return (working.decimals >= working.alphas && working.decimals > 1) || (working.alphas <= 1);
}
export function tokenize(addr) {
    const head = {
        next: null,
        isHead: true,
        separator: '',
        isEOL: false,
    };
    // Collapse whitespace
    // TODO: This regex is inordinately expensive. Replace.
    addr = addr.replace(/\n+/g, '\n').replace(/ +/g, ' ').replace(/\t+/g, '\t');
    // TODO: All of the below regexps are VERY expensive. Simplify.
    // Remove Care Of Abbr.
    addr = addr.replace(/C[/.]O\.?/gi, '');
    // P.O. Boxes and H.C. Boxes are Special.
    addr = addr
        .replace(/P\.O\./i, 'PO')
        .replace(/P\.O/i, 'PO')
        .replace(/P O /i, 'PO')
        .replace(/P\.O\.B\./i, ' PO BOX ')
        .replace(/P\. O\. B\./i, ' PO BOX ')
        .replace(/ POB[\d ]/i, 'PO BOX')
        .replace(/POX BOX/i, 'PO BOX')
        .replace(/POBOX/i, 'PO BOX')
        .replace(/POBX/i, 'PO BOX');
    addr = addr.replace(/H\.C\./i, 'HC ').replace(/H\.C/, 'HC ').replace(/H C /, 'HC ').replace(/HCBOX/i, 'HC BOX');
    addr = addr.replace(/highway carrier route/i, 'HC');
    addr = addr.replace(/highway contract route/i, 'HC');
    addr = addr.replace(/highway carrier/i, 'HC');
    addr = addr.replace(/highway contract/i, 'HC');
    addr = addr.replace(/star route/i, 'HC');
    addr = addr.replace(/rural route/i, 'RR');
    addr = addr.replace(/rural road/i, 'RR');
    addr = addr.replace(/township road/i, 'TSR');
    addr = addr.replace(/state route/i, 'SR');
    addr = addr.replace(/state road/i, 'SR');
    addr = addr.replace(/county road/i, 'CR');
    addr = addr.replace(/r\.\r\. rd/i, 'RR');
    addr = addr.replace(/s\.\r\. rd/i, 'SR');
    addr = addr.replace(/c\.\r\. rd/i, 'CR');
    addr = addr.replace(/rural rd/i, 'RR');
    addr = addr.replace(/township rd/i, 'TSR');
    addr = addr.replace(/state rd/i, 'SR');
    addr = addr.replace(/county rd/i, 'CR');
    addr = addr.replace(/LA CAMINITO/i, 'LACAMINITO');
    addr = addr.replace(/EL CAMINO/i, 'ELCAMINO');
    addr = addr.replace(/LA CERRADA/i, 'LACERRADA');
    addr = addr.replace(/LA ENTRADA/i, 'LAENTRADA');
    addr = addr.replace(/EL PASEO/i, 'ELPASEO');
    addr = addr.replace(/LA PLACITA/i, 'LAPLACITA');
    addr = addr.replace(/EL RANCHO/i, 'ELRANCHO');
    addr = addr.replace(/LA VEREDA/i, 'LAVEREDA');
    let pointer = {
        prev: head,
        next: null,
        value: '',
        separator: null,
        alphas: 0,
        decimals: 0,
        isEOL: false,
    };
    head.next = pointer;
    for (let i = 0; i < addr.length; i++) {
        const char = addr[i];
        const next = addr[i + 1];
        if (!pointer) {
            break;
        }
        if (legalChars.has(char)) {
            pointer.value += char;
            if (alphas.has(char)) {
                pointer.alphas++;
            }
            if (decimals.has(char)) {
                pointer.decimals++;
            }
        }
        else {
            if (newlines.has(char)) {
                pointer.isEOL = true;
            }
            else if (dashes.has(char)) {
                pointer.separator = '-';
            }
            else if (char === '.') {
                pointer.separator = '.';
            }
            else if (char === '&') {
                pointer.separator = '&';
            }
            else if (char === '#') {
                pointer.separator = '#';
            }
            else if (slashes.has(char)) {
                pointer.separator = '/';
            }
            // if (!isNumberOrCode(pointer) && !isState(pointer.value) && !isStreetType(pointer.value) && !isFacilityType(pointer.value) && !isUnitAbbr(pointer.value)) {
            //   if (!dictionary.check(pointer.value)) {
            //     const suggestions = dictionary.suggest(pointer.value);
            //     pointer.value = suggestions[0] || pointer.value;
            //   }
            // }
            pointer.value = capitalize.has(pointer.value.toUpperCase()) ? pointer.value.toUpperCase() : titleCase(pointer.value);
            if (legalChars.has(next)) {
                pointer = {
                    prev: pointer,
                    next: null,
                    value: '',
                    separator: null,
                    alphas: 0,
                    decimals: 0,
                    isEOL: false,
                };
                if (pointer.prev) {
                    pointer.prev.next = pointer;
                }
            }
        }
    }
    // No newlines after the last State discovered.
    while (pointer) {
        if (pointer.next && isState(pointer.next.value)) {
            while (pointer) {
                pointer.isEOL = false;
                pointer = pointer.next;
            }
            break;
        }
        if (isHead(pointer.prev)) {
            break;
        }
        pointer = pointer.prev;
    }
    // It is common for people to be silly and prefix/suffix some unit numbers with these common abbreviation.
    // Ex: 123 Water St. Apt APT1, 45 Spruce Ave 1PH
    // TODO: We can make this more robust...
    pointer = head.next;
    while (pointer) {
        if (!pointer) {
            break;
        }
        if (isOrder(pointer.value)) {
            pointer.value = orderToOrdinal(pointer.value);
        }
        const prefixTest = [UnitAbbr.APT, UnitAbbr.PH, UnitAbbr.LV, StreetType.RR, 'SUITE', 'UNIT'];
        const suffixText = [UnitAbbr.PH];
        for (const prefix of prefixTest) {
            if (pointer.value.toLowerCase().startsWith(prefix.toLowerCase()) && pointer.value.length > prefix.length) {
                // Special Case for plurals
                if (pointer.value.toUpperCase() === `${prefix.toUpperCase()}S`) {
                    continue;
                }
                const oldValue = pointer.value;
                pointer.value = pointer.value.slice(prefix.length);
                pointer.alphas -= prefix.length;
                if (!isNumberOrCode(pointer)) {
                    pointer.alphas += prefix.length;
                    pointer.value = oldValue;
                }
                else {
                    insertTokenBefore(pointer, prefix);
                }
            }
        }
        for (const suffix of suffixText) {
            if (pointer && pointer.value.toLowerCase().endsWith(suffix.toLowerCase()) && pointer.value.length > suffix.length) {
                const oldValue = pointer.value;
                pointer.value = pointer.value.slice(0, suffix.length * -1);
                pointer.alphas -= suffix.length;
                if (!isNumberOrCode(pointer)) {
                    pointer.alphas += suffix.length;
                    pointer.value = oldValue;
                }
                else {
                    const newToken = insertTokenAfter(pointer, suffix);
                    pointer = newToken;
                }
            }
        }
        pointer = pointer.next;
    }
    // Some mis-formatted facility addresses will prepend a '0' to make them appear like street addresses.
    if (head.next && head.next.value === '0' && head.next.next) {
        head.next = head.next.next;
    }
    return head;
}
// TODO: Use USPS hyphenation standards.
export function isHyphenatedCode(pointer) {
    if (isHead(pointer)) {
        return false;
    }
    if (!pointer.next || !dashes.has(pointer.separator || '')) {
        return false;
    }
    return !!(isNumerical(pointer.value) && isNumerical(pointer.next.value));
}
export function isNewlineSep(pointer) {
    if (!pointer || isHead(pointer)) {
        return false;
    }
    return pointer?.isEOL;
}
export function newlineCount(pointer) {
    let current = pointer;
    let i = 0;
    while (current) {
        if (isNewlineSep(current)) {
            i++;
        }
        current = current.next;
    }
    return i;
}
export function findNextNewLine(pointer) {
    let current = pointer;
    while (current) {
        if (isNewlineSep(current)) {
            return current.next;
        }
        current = current.next;
    }
    return null;
}
export function hasLaterStreetType(pointer, lineOnly = false) {
    if (!pointer) {
        return false;
    }
    if (isNewlineSep(pointer)) {
        return false;
    }
    let current = pointer.next;
    while (current) {
        if (isStreetType(current.value)) {
            return true;
        }
        if (lineOnly && current.separator) {
            break;
        }
        current = current.next;
    }
    return false;
}
export function hasStateUnit(pointer, lineOnly = false) {
    let current = pointer;
    while (current) {
        if (isState(current.value)) {
            return true;
        }
        if (lineOnly && current.separator) {
            break;
        }
        current = current.next;
    }
    return false;
}
export function newLineCount(pointer) {
    let current = pointer;
    let count = 0;
    while (current) {
        if (isNewlineSep(current)) {
            count++;
        }
        current = current.next;
    }
    return count;
}
export function streetTypeCount(pointer) {
    let current = pointer;
    let count = 0;
    while (current) {
        if (isStreetType(current.value)) {
            count++;
        }
        current = current.next;
    }
    return count;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidG9rZW5pemVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL3BhcnNlci90b2tlbml6ZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFVBQVUsRUFBQyxRQUFRLEVBQUUsTUFBTSxrQkFBa0IsQ0FBQztBQUV2RCxPQUFPLEVBQUUsT0FBTyxFQUFFLE1BQU0sa0JBQWtCLENBQUM7QUFDM0MsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLHVCQUF1QixDQUFDO0FBQ3JELE9BQU8sRUFBRSxXQUFXLEVBQUUsT0FBTyxFQUFDLGNBQWMsRUFBRSxTQUFTLEVBQUUsTUFBTSxZQUFZLENBQUM7QUFDNUUsb0RBQW9EO0FBQ3BELDRDQUE0QztBQUU1Qyx1QkFBdUI7QUFDdkIsaUNBQWlDO0FBQ2pDLG1DQUFtQztBQUNuQyx3Q0FBd0M7QUFDeEMsc0JBQXNCO0FBRXRCLE1BQU0sTUFBTSxHQUFHLElBQUksR0FBRyxDQUFDO0lBQ3JCLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRztJQUN6RSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRztJQUVyRCxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUc7SUFDekUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUc7Q0FDdEQsQ0FBQyxDQUFDO0FBRUgsTUFBTSxRQUFRLEdBQUcsSUFBSSxHQUFHLENBQUM7SUFDdkIsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRztDQUNqRCxDQUFDLENBQUM7QUFFSCw4Q0FBOEM7QUFDOUMsTUFBTSxVQUFVLEdBQUcsSUFBSSxHQUFHLENBQUMsQ0FBRSxHQUFHLE1BQU0sRUFBRSxHQUFHLFFBQVEsQ0FBRSxDQUFDLENBQUM7QUFFdkQsTUFBTSxRQUFRLEdBQUcsSUFBSSxHQUFHLENBQUMsQ0FBRSxHQUFHLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBRSxDQUFDLENBQUM7QUFDOUMsTUFBTSxNQUFNLEdBQUcsSUFBSSxHQUFHLENBQUMsQ0FBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsQ0FBRSxDQUFDLENBQUM7QUFDMUMsTUFBTSxPQUFPLEdBQUcsSUFBSSxHQUFHLENBQUMsQ0FBRSxJQUFJLEVBQUUsR0FBRyxDQUFFLENBQUMsQ0FBQztBQW9CdkMsMEVBQTBFO0FBQzFFLDRDQUE0QztBQUM1QyxNQUFNLFVBQVUsR0FBRyxJQUFJLEdBQUcsQ0FBQyxDQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLE9BQU8sRUFBRSxNQUFNO0lBQy9ELDRHQUE0RztJQUM1RyxLQUFLLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxJQUFJO0lBQ2hILEtBQUssRUFBRSxLQUFLLEVBQUUsSUFBSSxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLEtBQUs7SUFDL0csS0FBSyxFQUFFLE1BQU0sRUFBRSxPQUFPLEVBQUUsT0FBTyxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSztJQUNsSCxLQUFLLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsS0FBSztJQUNySCxLQUFLLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxPQUFPLEVBQUUsS0FBSztJQUN0SCxJQUFJLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsSUFBSSxFQUFFLEtBQUs7SUFDdkgsTUFBTSxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsSUFBSSxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLEtBQUs7SUFDekgsTUFBTSxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUUsT0FBTyxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLEtBQUs7SUFDdkgsS0FBSyxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRSxPQUFPLEVBQUUsS0FBSyxFQUFFLElBQUk7SUFDeEgsS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsSUFBSSxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsUUFBUSxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsS0FBSztJQUN0SCxLQUFLLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLE9BQU8sRUFBRSxNQUFNLEVBQUUsUUFBUSxFQUFFLE1BQU0sRUFBRSxLQUFLO0lBQ3ZILEtBQUssRUFBRSxLQUFLLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsS0FBSztJQUMzSCxLQUFLLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFFLEtBQUs7SUFDL0gsS0FBSyxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLE1BQU07SUFDdkgsTUFBTSxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsSUFBSSxFQUFFLE9BQU87SUFDeEgsS0FBSyxFQUFFLEtBQUssRUFBRSxPQUFPLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxPQUFPLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxTQUFTLEVBQUUsS0FBSztJQUN2SCxLQUFLLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsT0FBTyxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSztJQUMxSCxLQUFLLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxPQUFPLEVBQUUsS0FBSyxFQUFFLE1BQU07SUFDN0gsS0FBSyxFQUFFLElBQUksRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFFLElBQUk7Q0FDakMsQ0FBQyxDQUFDO0FBRUgsTUFBTSxVQUFVLE1BQU0sQ0FBQyxLQUFjO0lBQ25DLE9BQU8sQ0FBQyxDQUFDLENBQUMsS0FBSyxJQUFLLEtBQWMsQ0FBQyxNQUFNLENBQUMsQ0FBQztBQUM3QyxDQUFDO0FBRUQsTUFBTSxVQUFVLGdCQUFnQixDQUFDLElBQVcsRUFBRSxLQUFhO0lBQ3pELE1BQU0sS0FBSyxHQUFHO1FBQ1osSUFBSTtRQUNKLElBQUksRUFBRSxJQUFJLENBQUMsSUFBSTtRQUNmLEtBQUs7UUFDTCxTQUFTLEVBQUUsSUFBSTtRQUNmLE1BQU0sRUFBRSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsTUFBTTtRQUMvQyxRQUFRLEVBQUUsQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLE1BQU07UUFDM0MsS0FBSyxFQUFFLElBQUksQ0FBQyxLQUFLO0tBQ2xCLENBQUM7SUFDRixLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksR0FBRyxLQUFLLENBQUM7SUFDeEIsS0FBSyxDQUFDLElBQUksQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDO0lBQ3pCLEtBQUssQ0FBQyxJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksR0FBRyxLQUFLLENBQUMsQ0FBQztJQUN4QyxPQUFPLEtBQUssQ0FBQztBQUNmLENBQUM7QUFFRCxNQUFNLFVBQVUsaUJBQWlCLENBQUMsSUFBVyxFQUFFLEtBQWE7SUFDMUQsTUFBTSxLQUFLLEdBQUc7UUFDWixJQUFJLEVBQUUsSUFBSSxDQUFDLElBQUk7UUFDZixJQUFJO1FBQ0osS0FBSztRQUNMLFNBQVMsRUFBRSxJQUFJO1FBQ2YsTUFBTSxFQUFFLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxNQUFNO1FBQy9DLFFBQVEsRUFBRSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsTUFBTTtRQUMzQyxLQUFLLEVBQUUsS0FBSztLQUNiLENBQUM7SUFDRixLQUFLLENBQUMsSUFBSSxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLEdBQUcsS0FBSyxDQUFDLENBQUM7SUFDeEMsS0FBSyxDQUFDLElBQUksSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxHQUFHLEtBQUssQ0FBQyxDQUFDO0lBQ3hDLE9BQU8sS0FBSyxDQUFDO0FBQ2YsQ0FBQztBQUVELE1BQU0sVUFBVSxjQUFjLENBQUMsT0FBOEI7SUFDM0QsSUFBSSxDQUFDLE9BQU8sRUFBRSxDQUFDO1FBQUMsT0FBTyxLQUFLLENBQUM7SUFBQyxDQUFDO0lBRS9CLE1BQU0sT0FBTyxHQUFHO1FBQ2QsS0FBSyxFQUFFLE9BQU8sT0FBTyxLQUFLLFFBQVEsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsS0FBSztRQUM1RCxRQUFRLEVBQUUsT0FBTyxPQUFPLEtBQUssUUFBUSxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxFQUFFLE1BQU0sSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxRQUFRO1FBQzVGLE1BQU0sRUFBRSxPQUFPLE9BQU8sS0FBSyxRQUFRLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxXQUFXLEVBQUUsQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLEVBQUUsTUFBTSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLE1BQU07UUFDekcsSUFBSSxFQUFFLElBQUk7UUFDVixTQUFTLEVBQUUsT0FBTyxPQUFPLEtBQUssUUFBUSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxTQUFTO0tBQ2hFLENBQUM7SUFFRixJQUFJLE9BQU8sQ0FBQyxTQUFTLEtBQUssR0FBRyxFQUFFLENBQUM7UUFBQyxPQUFPLEtBQUssQ0FBQztJQUFDLENBQUM7SUFFaEQsK0VBQStFO0lBQy9FLElBQUksT0FBTyxDQUFDLEtBQUssSUFBSSxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDO1FBQUMsT0FBTyxJQUFJLENBQUM7SUFBQyxDQUFDO0lBRXBFLGlFQUFpRTtJQUNqRSxJQUFJLE9BQU8sQ0FBQyxNQUFNLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLFFBQVEsSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLFNBQVMsSUFBSSxFQUFFLENBQUMsSUFBSSxNQUFNLENBQUMsR0FBRyxDQUFFLE9BQWlCLENBQUMsSUFBSSxFQUFFLFNBQVMsSUFBSSxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUM7UUFBQyxPQUFPLElBQUksQ0FBQztJQUFDLENBQUM7SUFFL0osMEZBQTBGO0lBQzFGLE9BQU8sQ0FBQyxPQUFPLENBQUMsUUFBUSxJQUFJLE9BQU8sQ0FBQyxNQUFNLElBQUksT0FBTyxDQUFDLFFBQVEsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxNQUFNLElBQUksQ0FBQyxDQUFDLENBQUM7QUFDL0YsQ0FBQztBQUVELE1BQU0sVUFBVSxRQUFRLENBQUMsSUFBWTtJQUNuQyxNQUFNLElBQUksR0FBUztRQUNqQixJQUFJLEVBQUUsSUFBSTtRQUNWLE1BQU0sRUFBRSxJQUFJO1FBQ1osU0FBUyxFQUFFLEVBQUU7UUFDYixLQUFLLEVBQUUsS0FBSztLQUNiLENBQUM7SUFFRixzQkFBc0I7SUFDdEIsdURBQXVEO0lBQ3ZELElBQUksR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsQ0FBQyxPQUFPLENBQUMsS0FBSyxFQUFFLEdBQUcsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxNQUFNLEVBQUUsSUFBSSxDQUFDLENBQUM7SUFFNUUsK0RBQStEO0lBQy9ELHVCQUF1QjtJQUN2QixJQUFJLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxhQUFhLEVBQUUsRUFBRSxDQUFDLENBQUM7SUFFdkMseUNBQXlDO0lBQ3pDLElBQUksR0FBRyxJQUFJO1NBQ1IsT0FBTyxDQUFDLFNBQVMsRUFBRSxJQUFJLENBQUM7U0FDeEIsT0FBTyxDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUM7U0FDdEIsT0FBTyxDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUM7U0FDdEIsT0FBTyxDQUFDLFlBQVksRUFBRSxVQUFVLENBQUM7U0FDakMsT0FBTyxDQUFDLGNBQWMsRUFBRSxVQUFVLENBQUM7U0FDbkMsT0FBTyxDQUFDLFlBQVksRUFBRSxRQUFRLENBQUM7U0FDL0IsT0FBTyxDQUFDLFVBQVUsRUFBRSxRQUFRLENBQUM7U0FDN0IsT0FBTyxDQUFDLFFBQVEsRUFBRSxRQUFRLENBQUM7U0FDM0IsT0FBTyxDQUFDLE9BQU8sRUFBRSxRQUFRLENBQUMsQ0FBQztJQUM5QixJQUFJLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxTQUFTLEVBQUUsS0FBSyxDQUFDLENBQUMsT0FBTyxDQUFDLE1BQU0sRUFBRSxLQUFLLENBQUMsQ0FBQyxPQUFPLENBQUMsTUFBTSxFQUFFLEtBQUssQ0FBQyxDQUFDLE9BQU8sQ0FBQyxRQUFRLEVBQUUsUUFBUSxDQUFDLENBQUM7SUFFaEgsSUFBSSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsd0JBQXdCLEVBQUUsSUFBSSxDQUFDLENBQUM7SUFDcEQsSUFBSSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMseUJBQXlCLEVBQUUsSUFBSSxDQUFDLENBQUM7SUFDckQsSUFBSSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsa0JBQWtCLEVBQUUsSUFBSSxDQUFDLENBQUM7SUFDOUMsSUFBSSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsbUJBQW1CLEVBQUUsSUFBSSxDQUFDLENBQUM7SUFDL0MsSUFBSSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsYUFBYSxFQUFFLElBQUksQ0FBQyxDQUFDO0lBQ3pDLElBQUksR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLGNBQWMsRUFBRSxJQUFJLENBQUMsQ0FBQztJQUUxQyxJQUFJLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxhQUFhLEVBQUUsSUFBSSxDQUFDLENBQUM7SUFDekMsSUFBSSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsZ0JBQWdCLEVBQUUsS0FBSyxDQUFDLENBQUM7SUFDN0MsSUFBSSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsY0FBYyxFQUFFLElBQUksQ0FBQyxDQUFDO0lBQzFDLElBQUksR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLGFBQWEsRUFBRSxJQUFJLENBQUMsQ0FBQztJQUN6QyxJQUFJLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxjQUFjLEVBQUUsSUFBSSxDQUFDLENBQUM7SUFFMUMsSUFBSSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsYUFBYSxFQUFFLElBQUksQ0FBQyxDQUFDO0lBQ3pDLElBQUksR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLGFBQWEsRUFBRSxJQUFJLENBQUMsQ0FBQztJQUN6QyxJQUFJLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxhQUFhLEVBQUUsSUFBSSxDQUFDLENBQUM7SUFFekMsSUFBSSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsV0FBVyxFQUFFLElBQUksQ0FBQyxDQUFDO0lBQ3ZDLElBQUksR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLGNBQWMsRUFBRSxLQUFLLENBQUMsQ0FBQztJQUMzQyxJQUFJLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxXQUFXLEVBQUUsSUFBSSxDQUFDLENBQUM7SUFDdkMsSUFBSSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsWUFBWSxFQUFFLElBQUksQ0FBQyxDQUFDO0lBRXhDLElBQUksR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLGNBQWMsRUFBRSxZQUFZLENBQUMsQ0FBQztJQUNsRCxJQUFJLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxZQUFZLEVBQUUsVUFBVSxDQUFDLENBQUM7SUFDOUMsSUFBSSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsYUFBYSxFQUFFLFdBQVcsQ0FBQyxDQUFDO0lBQ2hELElBQUksR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLGFBQWEsRUFBRSxXQUFXLENBQUMsQ0FBQztJQUNoRCxJQUFJLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxXQUFXLEVBQUUsU0FBUyxDQUFDLENBQUM7SUFDNUMsSUFBSSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsYUFBYSxFQUFFLFdBQVcsQ0FBQyxDQUFDO0lBQ2hELElBQUksR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLFlBQVksRUFBRSxVQUFVLENBQUMsQ0FBQztJQUM5QyxJQUFJLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxZQUFZLEVBQUUsVUFBVSxDQUFDLENBQUM7SUFFOUMsSUFBSSxPQUFPLEdBQWlCO1FBQzFCLElBQUksRUFBRSxJQUFJO1FBQ1YsSUFBSSxFQUFFLElBQUk7UUFDVixLQUFLLEVBQUUsRUFBRTtRQUNULFNBQVMsRUFBRSxJQUFJO1FBQ2YsTUFBTSxFQUFFLENBQUM7UUFDVCxRQUFRLEVBQUUsQ0FBQztRQUNYLEtBQUssRUFBRSxLQUFLO0tBQ2IsQ0FBQztJQUVGLElBQUksQ0FBQyxJQUFJLEdBQUcsT0FBTyxDQUFDO0lBRXBCLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUM7UUFDckMsTUFBTSxJQUFJLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3JCLE1BQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDekIsSUFBSSxDQUFDLE9BQU8sRUFBRSxDQUFDO1lBQUMsTUFBTTtRQUFDLENBQUM7UUFDeEIsSUFBSSxVQUFVLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUM7WUFDekIsT0FBTyxDQUFDLEtBQUssSUFBSSxJQUFJLENBQUM7WUFDdEIsSUFBSSxNQUFNLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUM7Z0JBQ3JCLE9BQU8sQ0FBQyxNQUFNLEVBQUUsQ0FBQztZQUNuQixDQUFDO1lBQ0QsSUFBSSxRQUFRLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUM7Z0JBQ3ZCLE9BQU8sQ0FBQyxRQUFRLEVBQUUsQ0FBQztZQUNyQixDQUFDO1FBQ0gsQ0FBQzthQUNJLENBQUM7WUFDSixJQUFJLFFBQVEsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQztnQkFBQyxPQUFPLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQztZQUFDLENBQUM7aUJBQzVDLElBQUksTUFBTSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDO2dCQUFDLE9BQU8sQ0FBQyxTQUFTLEdBQUcsR0FBRyxDQUFDO1lBQUMsQ0FBQztpQkFDbEQsSUFBSSxJQUFJLEtBQUssR0FBRyxFQUFFLENBQUM7Z0JBQUMsT0FBTyxDQUFDLFNBQVMsR0FBRyxHQUFHLENBQUM7WUFBQyxDQUFDO2lCQUM5QyxJQUFJLElBQUksS0FBSyxHQUFHLEVBQUUsQ0FBQztnQkFBQyxPQUFPLENBQUMsU0FBUyxHQUFHLEdBQUcsQ0FBQztZQUFDLENBQUM7aUJBQzlDLElBQUksSUFBSSxLQUFLLEdBQUcsRUFBRSxDQUFDO2dCQUFDLE9BQU8sQ0FBQyxTQUFTLEdBQUcsR0FBRyxDQUFDO1lBQUMsQ0FBQztpQkFDOUMsSUFBSSxPQUFPLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUM7Z0JBQUMsT0FBTyxDQUFDLFNBQVMsR0FBRyxHQUFHLENBQUM7WUFBQyxDQUFDO1lBQ3hELDZKQUE2SjtZQUM3Siw0Q0FBNEM7WUFDNUMsNkRBQTZEO1lBQzdELHVEQUF1RDtZQUN2RCxNQUFNO1lBQ04sSUFBSTtZQUNKLE9BQU8sQ0FBQyxLQUFLLEdBQUcsVUFBVSxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLFdBQVcsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsV0FBVyxFQUFFLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDckgsSUFBSSxVQUFVLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUM7Z0JBQ3pCLE9BQU8sR0FBRztvQkFDUixJQUFJLEVBQUUsT0FBTztvQkFDYixJQUFJLEVBQUUsSUFBSTtvQkFDVixLQUFLLEVBQUUsRUFBRTtvQkFDVCxTQUFTLEVBQUUsSUFBSTtvQkFDZixNQUFNLEVBQUUsQ0FBQztvQkFDVCxRQUFRLEVBQUUsQ0FBQztvQkFDWCxLQUFLLEVBQUUsS0FBSztpQkFDYixDQUFDO2dCQUNGLElBQUksT0FBTyxDQUFDLElBQUksRUFBRSxDQUFDO29CQUNqQixPQUFPLENBQUMsSUFBSSxDQUFDLElBQUksR0FBRyxPQUFPLENBQUM7Z0JBQzlCLENBQUM7WUFDSCxDQUFDO1FBQ0gsQ0FBQztJQUNILENBQUM7SUFFRCwrQ0FBK0M7SUFDL0MsT0FBTyxPQUFPLEVBQUUsQ0FBQztRQUNmLElBQUksT0FBTyxDQUFDLElBQUksSUFBSSxPQUFPLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDO1lBQ2hELE9BQU8sT0FBTyxFQUFFLENBQUM7Z0JBQ2YsT0FBTyxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUM7Z0JBQ3RCLE9BQU8sR0FBRyxPQUFPLENBQUMsSUFBSSxDQUFDO1lBQ3pCLENBQUM7WUFDRCxNQUFNO1FBQ1IsQ0FBQztRQUNELElBQUksTUFBTSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDO1lBQUMsTUFBTTtRQUFDLENBQUM7UUFDcEMsT0FBTyxHQUFHLE9BQU8sQ0FBQyxJQUFJLENBQUM7SUFDekIsQ0FBQztJQUVELDBHQUEwRztJQUMxRyxnREFBZ0Q7SUFDaEQsd0NBQXdDO0lBQ3hDLE9BQU8sR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDO0lBQ3BCLE9BQU8sT0FBTyxFQUFFLENBQUM7UUFDZixJQUFJLENBQUMsT0FBTyxFQUFFLENBQUM7WUFBQyxNQUFNO1FBQUMsQ0FBQztRQUV4QixJQUFJLE9BQU8sQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQztZQUMzQixPQUFPLENBQUMsS0FBSyxHQUFHLGNBQWMsQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDaEQsQ0FBQztRQUVELE1BQU0sVUFBVSxHQUFHLENBQUUsUUFBUSxDQUFDLEdBQUcsRUFBRSxRQUFRLENBQUMsRUFBRSxFQUFFLFFBQVEsQ0FBQyxFQUFFLEVBQUUsVUFBVSxDQUFDLEVBQUUsRUFBRSxPQUFPLEVBQUUsTUFBTSxDQUFFLENBQUM7UUFDOUYsTUFBTSxVQUFVLEdBQUcsQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDLENBQUM7UUFFakMsS0FBSyxNQUFNLE1BQU0sSUFBSSxVQUFVLEVBQUUsQ0FBQztZQUNoQyxJQUFJLE9BQU8sQ0FBQyxLQUFLLENBQUMsV0FBVyxFQUFFLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxXQUFXLEVBQUUsQ0FBQyxJQUFJLE9BQU8sQ0FBQyxLQUFLLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQyxNQUFNLEVBQUUsQ0FBQztnQkFDekcsMkJBQTJCO2dCQUMzQixJQUFJLE9BQU8sQ0FBQyxLQUFLLENBQUMsV0FBVyxFQUFFLEtBQUssR0FBRyxNQUFNLENBQUMsV0FBVyxFQUFJLEdBQUcsRUFBRSxDQUFDO29CQUFDLFNBQVM7Z0JBQUMsQ0FBQztnQkFFL0UsTUFBTSxRQUFRLEdBQUcsT0FBTyxDQUFDLEtBQUssQ0FBQztnQkFDL0IsT0FBTyxDQUFDLEtBQUssR0FBRyxPQUFPLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUM7Z0JBQ25ELE9BQU8sQ0FBQyxNQUFNLElBQUksTUFBTSxDQUFDLE1BQU0sQ0FBQztnQkFDaEMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDO29CQUM3QixPQUFPLENBQUMsTUFBTSxJQUFJLE1BQU0sQ0FBQyxNQUFNLENBQUM7b0JBQ2hDLE9BQU8sQ0FBQyxLQUFLLEdBQUcsUUFBUSxDQUFDO2dCQUMzQixDQUFDO3FCQUNJLENBQUM7b0JBQ0osaUJBQWlCLENBQUMsT0FBTyxFQUFFLE1BQU0sQ0FBQyxDQUFDO2dCQUNyQyxDQUFDO1lBQ0gsQ0FBQztRQUNILENBQUM7UUFFRCxLQUFLLE1BQU0sTUFBTSxJQUFJLFVBQVUsRUFBRSxDQUFDO1lBQ2hDLElBQUksT0FBTyxJQUFJLE9BQU8sQ0FBQyxLQUFLLENBQUMsV0FBVyxFQUFFLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxXQUFXLEVBQUUsQ0FBQyxJQUFJLE9BQU8sQ0FBQyxLQUFLLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQyxNQUFNLEVBQUUsQ0FBQztnQkFDbEgsTUFBTSxRQUFRLEdBQUcsT0FBTyxDQUFDLEtBQUssQ0FBQztnQkFDL0IsT0FBTyxDQUFDLEtBQUssR0FBRyxPQUFPLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsTUFBTSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUMzRCxPQUFPLENBQUMsTUFBTSxJQUFJLE1BQU0sQ0FBQyxNQUFNLENBQUM7Z0JBQ2hDLElBQUksQ0FBQyxjQUFjLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQztvQkFDN0IsT0FBTyxDQUFDLE1BQU0sSUFBSSxNQUFNLENBQUMsTUFBTSxDQUFDO29CQUNoQyxPQUFPLENBQUMsS0FBSyxHQUFHLFFBQVEsQ0FBQztnQkFDM0IsQ0FBQztxQkFDSSxDQUFDO29CQUNKLE1BQU0sUUFBUSxHQUFHLGdCQUFnQixDQUFDLE9BQU8sRUFBRSxNQUFNLENBQUMsQ0FBQztvQkFDbkQsT0FBTyxHQUFHLFFBQVEsQ0FBQztnQkFDckIsQ0FBQztZQUNILENBQUM7UUFDSCxDQUFDO1FBQ0QsT0FBTyxHQUFHLE9BQU8sQ0FBQyxJQUFJLENBQUM7SUFDekIsQ0FBQztJQUVELHNHQUFzRztJQUN0RyxJQUFJLElBQUksQ0FBQyxJQUFJLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLEtBQUssR0FBRyxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7UUFDM0QsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQztJQUM3QixDQUFDO0lBRUQsT0FBTyxJQUFJLENBQUM7QUFDZCxDQUFDO0FBRUQsd0NBQXdDO0FBQ3hDLE1BQU0sVUFBVSxnQkFBZ0IsQ0FBQyxPQUFxQjtJQUNwRCxJQUFJLE1BQU0sQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDO1FBQUMsT0FBTyxLQUFLLENBQUM7SUFBQyxDQUFDO0lBQ3RDLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsU0FBUyxJQUFJLEVBQUUsQ0FBQyxFQUFFLENBQUM7UUFBQyxPQUFPLEtBQUssQ0FBQztJQUFDLENBQUM7SUFDNUUsT0FBTyxDQUFDLENBQUMsQ0FBQyxXQUFXLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxJQUFJLFdBQVcsQ0FBRSxPQUFPLENBQUMsSUFBYyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7QUFDdEYsQ0FBQztBQUVELE1BQU0sVUFBVSxZQUFZLENBQUMsT0FBNEI7SUFDdkQsSUFBSSxDQUFDLE9BQU8sSUFBSSxNQUFNLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQztRQUFDLE9BQU8sS0FBSyxDQUFDO0lBQUMsQ0FBQztJQUNsRCxPQUFPLE9BQU8sRUFBRSxLQUFLLENBQUM7QUFDeEIsQ0FBQztBQUVELE1BQU0sVUFBVSxZQUFZLENBQUMsT0FBNEI7SUFDdkQsSUFBSSxPQUFPLEdBQXdCLE9BQU8sQ0FBQztJQUMzQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDVixPQUFPLE9BQU8sRUFBRSxDQUFDO1FBQ2YsSUFBSSxZQUFZLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQztZQUFDLENBQUMsRUFBRSxDQUFDO1FBQUMsQ0FBQztRQUNuQyxPQUFPLEdBQUcsT0FBTyxDQUFDLElBQUksQ0FBQztJQUN6QixDQUFDO0lBQ0QsT0FBTyxDQUFDLENBQUM7QUFDWCxDQUFDO0FBRUQsTUFBTSxVQUFVLGVBQWUsQ0FBQyxPQUFxQjtJQUNuRCxJQUFJLE9BQU8sR0FBaUIsT0FBTyxDQUFDO0lBQ3BDLE9BQU8sT0FBTyxFQUFFLENBQUM7UUFDZixJQUFJLFlBQVksQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDO1lBQUMsT0FBTyxPQUFPLENBQUMsSUFBSSxDQUFDO1FBQUMsQ0FBQztRQUNuRCxPQUFPLEdBQUcsT0FBTyxDQUFDLElBQUksQ0FBQztJQUN6QixDQUFDO0lBQ0QsT0FBTyxJQUFJLENBQUM7QUFDZCxDQUFDO0FBRUQsTUFBTSxVQUFVLGtCQUFrQixDQUFDLE9BQXFCLEVBQUUsUUFBUSxHQUFHLEtBQUs7SUFDeEUsSUFBSSxDQUFDLE9BQU8sRUFBRSxDQUFDO1FBQUMsT0FBTyxLQUFLLENBQUM7SUFBQyxDQUFDO0lBQy9CLElBQUksWUFBWSxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUM7UUFBQyxPQUFPLEtBQUssQ0FBQztJQUFDLENBQUM7SUFDNUMsSUFBSSxPQUFPLEdBQWlCLE9BQU8sQ0FBQyxJQUFJLENBQUM7SUFDekMsT0FBTyxPQUFPLEVBQUUsQ0FBQztRQUNmLElBQUksWUFBWSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDO1lBQUMsT0FBTyxJQUFJLENBQUM7UUFBQyxDQUFDO1FBQ2pELElBQUksUUFBUSxJQUFJLE9BQU8sQ0FBQyxTQUFTLEVBQUUsQ0FBQztZQUFDLE1BQU07UUFBQyxDQUFDO1FBQzdDLE9BQU8sR0FBRyxPQUFPLENBQUMsSUFBSSxDQUFDO0lBQ3pCLENBQUM7SUFDRCxPQUFPLEtBQUssQ0FBQztBQUNmLENBQUM7QUFFRCxNQUFNLFVBQVUsWUFBWSxDQUFDLE9BQXFCLEVBQUUsUUFBUSxHQUFHLEtBQUs7SUFDbEUsSUFBSSxPQUFPLEdBQWlCLE9BQU8sQ0FBQztJQUNwQyxPQUFPLE9BQU8sRUFBRSxDQUFDO1FBQ2YsSUFBSSxPQUFPLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUM7WUFBQyxPQUFPLElBQUksQ0FBQztRQUFDLENBQUM7UUFDNUMsSUFBSSxRQUFRLElBQUksT0FBTyxDQUFDLFNBQVMsRUFBRSxDQUFDO1lBQUMsTUFBTTtRQUFDLENBQUM7UUFDN0MsT0FBTyxHQUFHLE9BQU8sQ0FBQyxJQUFJLENBQUM7SUFDekIsQ0FBQztJQUNELE9BQU8sS0FBSyxDQUFDO0FBQ2YsQ0FBQztBQUVELE1BQU0sVUFBVSxZQUFZLENBQUMsT0FBcUI7SUFDaEQsSUFBSSxPQUFPLEdBQWlCLE9BQU8sQ0FBQztJQUNwQyxJQUFJLEtBQUssR0FBRyxDQUFDLENBQUM7SUFDZCxPQUFPLE9BQU8sRUFBRSxDQUFDO1FBQ2YsSUFBSSxZQUFZLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQztZQUFDLEtBQUssRUFBRSxDQUFDO1FBQUMsQ0FBQztRQUN2QyxPQUFPLEdBQUcsT0FBTyxDQUFDLElBQUksQ0FBQztJQUN6QixDQUFDO0lBQ0QsT0FBTyxLQUFLLENBQUM7QUFDZixDQUFDO0FBRUQsTUFBTSxVQUFVLGVBQWUsQ0FBQyxPQUFxQjtJQUNuRCxJQUFJLE9BQU8sR0FBaUIsT0FBTyxDQUFDO0lBQ3BDLElBQUksS0FBSyxHQUFHLENBQUMsQ0FBQztJQUNkLE9BQU8sT0FBTyxFQUFFLENBQUM7UUFDZixJQUFJLFlBQVksQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQztZQUFDLEtBQUssRUFBRSxDQUFDO1FBQUMsQ0FBQztRQUM3QyxPQUFPLEdBQUcsT0FBTyxDQUFDLElBQUksQ0FBQztJQUN6QixDQUFDO0lBQ0QsT0FBTyxLQUFLLENBQUM7QUFDZixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgU3RyZWV0VHlwZSxVbml0QWJiciB9IGZyb20gJ0B1bml2ZXJzZS9tb2RlbHMnO1xuXG5pbXBvcnQgeyBpc1N0YXRlIH0gZnJvbSAnLi4vZGF0YS9TdGF0ZS5qcyc7XG5pbXBvcnQgeyBpc1N0cmVldFR5cGUgfSBmcm9tICcuLi9kYXRhL1N0cmVldFR5cGUuanMnO1xuaW1wb3J0IHsgaXNOdW1lcmljYWwsIGlzT3JkZXIsb3JkZXJUb09yZGluYWwsIHRpdGxlQ2FzZSB9IGZyb20gJy4vdXRpbHMuanMnO1xuLy8gaW1wb3J0IHsgaXNGYWNpbGl0eVR5cGUgfSBmcm9tICcuLi9GYWNpbGl0eVR5cGUnO1xuLy8gaW1wb3J0IHsgaXNVbml0QWJiciB9IGZyb20gJy4uL1VuaXRBYmJyJztcblxuLy8gLyogZXNsaW50LWRpc2FibGUgKi9cbi8vIFRPRE86IFNwZWxsIENoZWNrIEludGVncmF0aW9uP1xuLy8gY29uc3QgVHlwbyA9IHJlcXVpcmUoXCJ0eXBvLWpzXCIpO1xuLy8gY29uc3QgZGljdGlvbmFyeSA9IG5ldyBUeXBvKCdlbl9VUycpO1xuLy8gLyogZXNsaW50LWVuYWJsZSAqL1xuXG5jb25zdCBhbHBoYXMgPSBuZXcgU2V0KFtcbiAgJ0EnLCAnQicsICdDJywgJ0QnLCAnRScsICdGJywgJ0cnLCAnSCcsICdJJywgJ0onLCAnSycsICdMJywgJ00nLCAnTicsICdPJyxcbiAgJ1AnLCAnUScsICdSJywgJ1MnLCAnVCcsICdVJywgJ1YnLCAnVycsICdYJywgJ1knLCAnWicsXG5cbiAgJ2EnLCAnYicsICdjJywgJ2QnLCAnZScsICdmJywgJ2cnLCAnaCcsICdpJywgJ2onLCAnaycsICdsJywgJ20nLCAnbicsICdvJyxcbiAgJ3AnLCAncScsICdyJywgJ3MnLCAndCcsICd1JywgJ3YnLCAndycsICd4JywgJ3knLCAneicsXG5dKTtcblxuY29uc3QgZGVjaW1hbHMgPSBuZXcgU2V0KFtcbiAgJzAnLCAnMScsICcyJywgJzMnLCAnNCcsICc1JywgJzYnLCAnNycsICc4JywgJzknLFxuXSk7XG5cbi8vIGh0dHBzOi8vcGUudXNwcy5jb20vdGV4dC9wdWIyOC8yOGMzXzAxOS5odG1cbmNvbnN0IGxlZ2FsQ2hhcnMgPSBuZXcgU2V0KFsgLi4uYWxwaGFzLCAuLi5kZWNpbWFscyBdKTtcblxuY29uc3QgbmV3bGluZXMgPSBuZXcgU2V0KFsgJywnLCAnXFx0JywgJ1xcbicgXSk7XG5jb25zdCBkYXNoZXMgPSBuZXcgU2V0KFsgJy0nLCAn4oCTJywgJ+KAlCcgXSk7XG5jb25zdCBzbGFzaGVzID0gbmV3IFNldChbICdcXFxcJywgJy8nIF0pO1xuXG5leHBvcnQgaW50ZXJmYWNlIFRva2VuIHtcbiAgLyogZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVzZS1iZWZvcmUtZGVmaW5lICovXG4gIHByZXY6IEhlYWQgfCBUb2tlbjtcbiAgbmV4dDogVG9rZW4gfCBudWxsO1xuICB2YWx1ZTogc3RyaW5nO1xuICBzZXBhcmF0b3I6ICctJyB8ICcuJyB8ICcjJyB8ICcmJyB8ICcsJyB8ICcvJyB8IG51bGw7XG4gIGFscGhhczogbnVtYmVyO1xuICBkZWNpbWFsczogbnVtYmVyO1xuICBpc0VPTDogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBIZWFkIHtcbiAgaXNIZWFkOiB0cnVlO1xuICBuZXh0OiBUb2tlbiB8IG51bGw7XG4gIHNlcGFyYXRvcjogJyc7XG4gIGlzRU9MOiBmYWxzZTtcbn1cblxuLy8gU3BlY2lhbCBub24tZW51bWVyYXRlZCBhYmJyZXZpYXRpb25zIHdlIHdhbnQgdG8gbWFrZSBzdXJlIHdlIGNhcGl0YWxpemVcbi8vIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1NoaXBfcHJlZml4XG5jb25zdCBjYXBpdGFsaXplID0gbmV3IFNldChbICdBRkInLCAnQVBPJywgJ0ZQTycsICdBRUNPTScsICdIUUJOJyxcbiAgLy8gaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvTGlzdF9vZl9jb2xsb3F1aWFsX25hbWVzX2Zvcl91bml2ZXJzaXRpZXNfYW5kX2NvbGxlZ2VzX2luX3RoZV9Vbml0ZWRfU3RhdGVzXG4gICdBRkEnLCAnQSZNJywgJ0EmVCcsICdBUFNVJywgJ0FMQVNVJywgJ0FTVScsICdBVScsICdBVU0nLCAnQkMnLCAnQkdTVScsICdCSFNVJywgJ0JKVScsICdCTUMnLCAnQlNDJywgJ0JTVScsICdCVScsXG4gICdCWVUnLCAnQ0JVJywgJ0NDJywgJ0NDTlknLCAnQ0NTVScsICdDQ1UnLCAnQ0NWJywgJ0NHVScsICdDSUEnLCAnQ01DJywgJ0NNVScsICdDTlUnLCAnQ1NCJywgJ1NKVScsICdDU0UnLCAnQ1NJJyxcbiAgJ0NTVScsICdDU1VGJywgJ0NTVUVCJywgJ0NTVUxBJywgJ0NTVVMnLCAnQ1UnLCAnQ1VBJywgJ0NVTlknLCAnREMnLCAnRFBVJywgJ0RTVScsICdEVScsICdFQ1UnLCAnRUlVJywgJ0VNVScsICdFTVUnLFxuICAnRU5DJywgJ0VUU1UnLCAnRVdVJywgJ0VLVScsICdGJk0nLCAnRkFNVScsICdGQVUnLCAnRkMnLCAnRkRVJywgJ0ZHQ1UnLCAnRklUJywgJ0ZJVScsICdGUFUnLCAnRlNVJywgJ0ZVJywgJ0dCJywgJ0dDVScsXG4gICdHR0MnLCAnR09OWicsICdHU1UnLCAnR1QnLCAnR1ZTVScsICdISVUnLCAnSE1DJywgJ0hVJywgJ0hVJywgJ0hTVScsICdJQycsICdJSVQnLCAnSVBGVycsICdJU1UnLCAnSVVQJywgJ0lVUFVJJywgJ0lXVScsXG4gICdJVycsICdKSFUnLCAnSk1VJywgJ0pXVScsICdKU1UnLCAnSlUnLCAnS1NVJywgJ0tVJywgJ0tVJywgJ0xDJywgJ0xIVScsICdMSVUnLCAnTE1VJywgJ0xTVScsICdMU1NVJywgJ0xUVScsICdMVScsICdMVUMnLFxuICAnTUNMQScsICdNSVQnLCAnTU1DJywgJ01TVScsICdNVFNVJywgJ01UVScsICdNVScsICdNVlNVJywgJ01VVycsICdOQVUnLCAnTkNDVScsICdOQ1NVJywgJ05EJywgJ05EU1UnLCAnTkVVJywgJ05JVScsICdOS1UnLFxuICAnTk1TVScsICdOTVUnLCAnTlNVJywgJ05VJywgJ05WVScsICdOVycsICdOV01TVScsICdOWUlUJywgJ05ZTUMnLCAnTllVJywgJ09DJywgJ09DQycsICdPQ1UnLCAnT0RVJywgJ09JVCcsICdPTlUnLCAnT1JVJyxcbiAgJ09TVScsICdPVScsICdQQycsICdQQ0MnLCAnUExOVScsICdQT00nLCAnUFNVJywgJ1BUUycsICdQVkFNVScsICdRVScsICdSSElUJywgJ1JJQycsICdSSVNEJywgJ1JJVCcsICdSLU1XQycsICdSUEknLCAnUlUnLFxuICAnUldVJywgJ1JXQycsICdTQlUnLCAnU0MnLCAnU0NTVScsICdTQ1UnLCAnU0RTTSZUJywgJ1NEU1UnLCAnU0ZTVScsICdTSEMnLCAnU0lVRScsICdTSkMnLCAnU0pGQycsICdTSlNVJywgJ1NKVScsICdTTFUnLFxuICAnU01DJywgJ1NNVScsICdTTkhVJywgJ1NPU1UnLCAnU1BVJywgJ1NSVScsICdTU1UnLCAnU1UnLCAnU1VJJywgJ1NVVScsICdTVU5ZJywgJ1NXT1NVJywgJ1RBTVUnLCAnVEFNVUNDJywgJ1RDTkonLCAnVENVJyxcbiAgJ1RTVScsICdUVFUnLCAnVFUnLCAnVUEnLCAnVUFBJywgJ1VBQicsICdVQUYnLCAnVUFIJywgJ1VBTFInLCAnVUFNJywgJ1VBUEInLCAnVUInLCAnVUMnLCAnVUNCJywgJ1VDQScsICdVQ0NTJywgJ1VDRCcsICdVQ0YnLFxuICAnVUNJJywgJ1VDTEEnLCAnVUNNJywgJ1VDTycsICdVQ1InLCAnVUNTQicsICdVQ1NDJywgJ1VDU0QnLCAnVUNTRicsICdVRCcsICdVRE0nLCAnVURDJywgJ1VGJywgJ1VHQScsICdVSCcsICdVSENMJywgJ1VIRCcsICdVSFMnLFxuICAnVUhWJywgJ1VJQycsICdVSVVDJywgJ1VLJywgJ1VMTScsICdVTCcsICdVTUInLCAnVU1CQycsICdVTUMnLCAnVU1EJywgJ1VNS0MnLCAnVU1MJywgJ1VNTycsICdVTVcnLCAnVU5BJywgJ1VOQycsICdVTkNDJyxcbiAgJ1VOQ0cnLCAnVU5DVycsICdVTkQnLCAnVU5GJywgJ1VOSCcsICdVTkknLCAnVU5LJywgJ1VOTCcsICdVTkxWJywgJ1VOTScsICdVTk8nLCAnVU5SJywgJ1VOVCcsICdVTycsICdVT1AnLCAnVVAnLCAnVVBJS0UnLFxuICAnVVJJJywgJ1VTQScsICdVU0FGQScsICdVU0FPJywgJ1VTQycsICdVU0NBJywgJ1VTRCcsICdVU0YnLCAnVVNGQ0EnLCAnVVNJJywgJ1VTTScsICdVU1UnLCAnVVQnLCAnVVRBJywgJ1VUQi9UU0MnLCAnVVRDJyxcbiAgJ1VURCcsICdVVEVQJywgJ1VUTScsICdVVFBCJywgJ1VUUkdWJywgJ1VUU0EnLCAnVVZBJywgJ1VWTScsICdVVlUnLCAnVVcnLCAnVVdGJywgJ1VXRycsICdVV0dCJywgJ1VXTScsICdWQ1UnLCAnVk1JJywgJ1ZQSScsXG4gICdWU1UnLCAnVlRDJywgJ1ZVJywgJ1cmSicsICdXJkwnLCAnVyZNJywgJ1dDJywgJ1dDVScsICdXRlUnLCAnV0dVJywgJ1dJVScsICdXS1UnLCAnV01VJywgJ1dQSScsICdXU1UnLCAnV1RBTVUnLCAnV1ZVJywgJ1dWVVAnLFxuICAnV1dVJywgJ1hVJywgJ1hVTEEnLCAnWVNVJywgJ1lVJyxcbl0pO1xuXG5leHBvcnQgZnVuY3Rpb24gaXNIZWFkKHRva2VuOiB1bmtub3duKTogdG9rZW4gaXMgSGVhZCB7XG4gIHJldHVybiAhISh0b2tlbiAmJiAodG9rZW4gYXMgSGVhZCkuaXNIZWFkKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGluc2VydFRva2VuQWZ0ZXIocHJldjogVG9rZW4sIHZhbHVlOiBzdHJpbmcpOiBUb2tlbiB7XG4gIGNvbnN0IHRva2VuID0ge1xuICAgIHByZXYsXG4gICAgbmV4dDogcHJldi5uZXh0LFxuICAgIHZhbHVlLFxuICAgIHNlcGFyYXRvcjogbnVsbCxcbiAgICBhbHBoYXM6ICh2YWx1ZS5tYXRjaCgvW2EtekEtWl0vZykgfHwgW10pLmxlbmd0aCxcbiAgICBkZWNpbWFsczogKHZhbHVlLm1hdGNoKC9cXGQvZykgfHwgW10pLmxlbmd0aCxcbiAgICBpc0VPTDogcHJldi5pc0VPTCxcbiAgfTtcbiAgdG9rZW4ucHJldi5uZXh0ID0gdG9rZW47XG4gIHRva2VuLnByZXYuaXNFT0wgPSBmYWxzZTtcbiAgdG9rZW4ubmV4dCAmJiAodG9rZW4ubmV4dC5wcmV2ID0gdG9rZW4pO1xuICByZXR1cm4gdG9rZW47XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpbnNlcnRUb2tlbkJlZm9yZShuZXh0OiBUb2tlbiwgdmFsdWU6IHN0cmluZyk6IFRva2VuIHtcbiAgY29uc3QgdG9rZW4gPSB7XG4gICAgcHJldjogbmV4dC5wcmV2LFxuICAgIG5leHQsXG4gICAgdmFsdWUsXG4gICAgc2VwYXJhdG9yOiBudWxsLFxuICAgIGFscGhhczogKHZhbHVlLm1hdGNoKC9bYS16QS1aXS9nKSB8fCBbXSkubGVuZ3RoLFxuICAgIGRlY2ltYWxzOiAodmFsdWUubWF0Y2goL1xcZC9nKSB8fCBbXSkubGVuZ3RoLFxuICAgIGlzRU9MOiBmYWxzZSxcbiAgfTtcbiAgdG9rZW4ucHJldiAmJiAodG9rZW4ucHJldi5uZXh0ID0gdG9rZW4pO1xuICB0b2tlbi5uZXh0ICYmICh0b2tlbi5uZXh0LnByZXYgPSB0b2tlbik7XG4gIHJldHVybiB0b2tlbjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzTnVtYmVyT3JDb2RlKHBvaW50ZXI6IFRva2VuIHwgc3RyaW5nIHwgbnVsbCk6IGJvb2xlYW4ge1xuICBpZiAoIXBvaW50ZXIpIHsgcmV0dXJuIGZhbHNlOyB9XG5cbiAgY29uc3Qgd29ya2luZyA9IHtcbiAgICB2YWx1ZTogdHlwZW9mIHBvaW50ZXIgPT09ICdzdHJpbmcnID8gcG9pbnRlciA6IHBvaW50ZXIudmFsdWUsXG4gICAgZGVjaW1hbHM6IHR5cGVvZiBwb2ludGVyID09PSAnc3RyaW5nJyA/IHBvaW50ZXIubWF0Y2goL1xcZC9nKT8ubGVuZ3RoIHx8IDAgOiBwb2ludGVyLmRlY2ltYWxzLFxuICAgIGFscGhhczogdHlwZW9mIHBvaW50ZXIgPT09ICdzdHJpbmcnID8gcG9pbnRlci50b0xvd2VyQ2FzZSgpLm1hdGNoKC9bXlxcZF0vZyk/Lmxlbmd0aCB8fCAwIDogcG9pbnRlci5hbHBoYXMsXG4gICAgcHJldjogbnVsbCxcbiAgICBzZXBhcmF0b3I6IHR5cGVvZiBwb2ludGVyID09PSAnc3RyaW5nJyA/ICcnIDogcG9pbnRlci5zZXBhcmF0b3IsXG4gIH07XG5cbiAgaWYgKHdvcmtpbmcuc2VwYXJhdG9yID09PSAnJicpIHsgcmV0dXJuIGZhbHNlOyB9XG5cbiAgLy8gSWYgc3RyaW5nIHN0YXJ0cyB3aXRoIGEgbnVtYmVyLCB0aGlzIGlzIGEgY29kZS4gRXg6IE9yZGluYWxzICgxc3QsIDJuZCwgZXRjKVxuICBpZiAod29ya2luZy52YWx1ZSAmJiB3b3JraW5nLnZhbHVlWzBdLm1hdGNoKC9eXFxkLykpIHsgcmV0dXJuIHRydWU7IH1cblxuICAvLyBEYXNoZWQgb25lLCB0d28gYW5kIHRocmVlIGNoYXJhY3RlciBhbHBoYSBzdHJpbmdzICphcmUqIGNvZGVzIVxuICBpZiAod29ya2luZy5hbHBoYXMgPD0gMyAmJiAhd29ya2luZy5kZWNpbWFscyAmJiAoZGFzaGVzLmhhcyh3b3JraW5nLnNlcGFyYXRvciB8fCAnJykgfHwgZGFzaGVzLmhhcygocG9pbnRlciBhcyBUb2tlbikucHJldj8uc2VwYXJhdG9yIHx8ICcnKSkpIHsgcmV0dXJuIHRydWU7IH1cblxuICAvLyBJZiBkZWNpbWFscyBlcXVhbCBvciBvdXRudW1iZXIgYWxwaGFzLCBvciB0aGlzIGlzIGEgc2luZ2xlIGNoYXJhY3RlciBzdHJpbmcsIGlzIGEgY29kZS5cbiAgcmV0dXJuICh3b3JraW5nLmRlY2ltYWxzID49IHdvcmtpbmcuYWxwaGFzICYmIHdvcmtpbmcuZGVjaW1hbHMgPiAxKSB8fCAod29ya2luZy5hbHBoYXMgPD0gMSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB0b2tlbml6ZShhZGRyOiBzdHJpbmcpOiBIZWFkIHtcbiAgY29uc3QgaGVhZDogSGVhZCA9IHtcbiAgICBuZXh0OiBudWxsLFxuICAgIGlzSGVhZDogdHJ1ZSxcbiAgICBzZXBhcmF0b3I6ICcnLFxuICAgIGlzRU9MOiBmYWxzZSxcbiAgfTtcblxuICAvLyBDb2xsYXBzZSB3aGl0ZXNwYWNlXG4gIC8vIFRPRE86IFRoaXMgcmVnZXggaXMgaW5vcmRpbmF0ZWx5IGV4cGVuc2l2ZS4gUmVwbGFjZS5cbiAgYWRkciA9IGFkZHIucmVwbGFjZSgvXFxuKy9nLCAnXFxuJykucmVwbGFjZSgvICsvZywgJyAnKS5yZXBsYWNlKC9cXHQrL2csICdcXHQnKTtcblxuICAvLyBUT0RPOiBBbGwgb2YgdGhlIGJlbG93IHJlZ2V4cHMgYXJlIFZFUlkgZXhwZW5zaXZlLiBTaW1wbGlmeS5cbiAgLy8gUmVtb3ZlIENhcmUgT2YgQWJici5cbiAgYWRkciA9IGFkZHIucmVwbGFjZSgvQ1svLl1PXFwuPy9naSwgJycpO1xuXG4gIC8vIFAuTy4gQm94ZXMgYW5kIEguQy4gQm94ZXMgYXJlIFNwZWNpYWwuXG4gIGFkZHIgPSBhZGRyXG4gICAgLnJlcGxhY2UoL1BcXC5PXFwuL2ksICdQTycpXG4gICAgLnJlcGxhY2UoL1BcXC5PL2ksICdQTycpXG4gICAgLnJlcGxhY2UoL1AgTyAvaSwgJ1BPJylcbiAgICAucmVwbGFjZSgvUFxcLk9cXC5CXFwuL2ksICcgUE8gQk9YICcpXG4gICAgLnJlcGxhY2UoL1BcXC4gT1xcLiBCXFwuL2ksICcgUE8gQk9YICcpXG4gICAgLnJlcGxhY2UoLyBQT0JbXFxkIF0vaSwgJ1BPIEJPWCcpXG4gICAgLnJlcGxhY2UoL1BPWCBCT1gvaSwgJ1BPIEJPWCcpXG4gICAgLnJlcGxhY2UoL1BPQk9YL2ksICdQTyBCT1gnKVxuICAgIC5yZXBsYWNlKC9QT0JYL2ksICdQTyBCT1gnKTtcbiAgYWRkciA9IGFkZHIucmVwbGFjZSgvSFxcLkNcXC4vaSwgJ0hDICcpLnJlcGxhY2UoL0hcXC5DLywgJ0hDICcpLnJlcGxhY2UoL0ggQyAvLCAnSEMgJykucmVwbGFjZSgvSENCT1gvaSwgJ0hDIEJPWCcpO1xuXG4gIGFkZHIgPSBhZGRyLnJlcGxhY2UoL2hpZ2h3YXkgY2FycmllciByb3V0ZS9pLCAnSEMnKTtcbiAgYWRkciA9IGFkZHIucmVwbGFjZSgvaGlnaHdheSBjb250cmFjdCByb3V0ZS9pLCAnSEMnKTtcbiAgYWRkciA9IGFkZHIucmVwbGFjZSgvaGlnaHdheSBjYXJyaWVyL2ksICdIQycpO1xuICBhZGRyID0gYWRkci5yZXBsYWNlKC9oaWdod2F5IGNvbnRyYWN0L2ksICdIQycpO1xuICBhZGRyID0gYWRkci5yZXBsYWNlKC9zdGFyIHJvdXRlL2ksICdIQycpO1xuICBhZGRyID0gYWRkci5yZXBsYWNlKC9ydXJhbCByb3V0ZS9pLCAnUlInKTtcblxuICBhZGRyID0gYWRkci5yZXBsYWNlKC9ydXJhbCByb2FkL2ksICdSUicpO1xuICBhZGRyID0gYWRkci5yZXBsYWNlKC90b3duc2hpcCByb2FkL2ksICdUU1InKTtcbiAgYWRkciA9IGFkZHIucmVwbGFjZSgvc3RhdGUgcm91dGUvaSwgJ1NSJyk7XG4gIGFkZHIgPSBhZGRyLnJlcGxhY2UoL3N0YXRlIHJvYWQvaSwgJ1NSJyk7XG4gIGFkZHIgPSBhZGRyLnJlcGxhY2UoL2NvdW50eSByb2FkL2ksICdDUicpO1xuXG4gIGFkZHIgPSBhZGRyLnJlcGxhY2UoL3JcXC5cXHJcXC4gcmQvaSwgJ1JSJyk7XG4gIGFkZHIgPSBhZGRyLnJlcGxhY2UoL3NcXC5cXHJcXC4gcmQvaSwgJ1NSJyk7XG4gIGFkZHIgPSBhZGRyLnJlcGxhY2UoL2NcXC5cXHJcXC4gcmQvaSwgJ0NSJyk7XG5cbiAgYWRkciA9IGFkZHIucmVwbGFjZSgvcnVyYWwgcmQvaSwgJ1JSJyk7XG4gIGFkZHIgPSBhZGRyLnJlcGxhY2UoL3Rvd25zaGlwIHJkL2ksICdUU1InKTtcbiAgYWRkciA9IGFkZHIucmVwbGFjZSgvc3RhdGUgcmQvaSwgJ1NSJyk7XG4gIGFkZHIgPSBhZGRyLnJlcGxhY2UoL2NvdW50eSByZC9pLCAnQ1InKTtcblxuICBhZGRyID0gYWRkci5yZXBsYWNlKC9MQSBDQU1JTklUTy9pLCAnTEFDQU1JTklUTycpO1xuICBhZGRyID0gYWRkci5yZXBsYWNlKC9FTCBDQU1JTk8vaSwgJ0VMQ0FNSU5PJyk7XG4gIGFkZHIgPSBhZGRyLnJlcGxhY2UoL0xBIENFUlJBREEvaSwgJ0xBQ0VSUkFEQScpO1xuICBhZGRyID0gYWRkci5yZXBsYWNlKC9MQSBFTlRSQURBL2ksICdMQUVOVFJBREEnKTtcbiAgYWRkciA9IGFkZHIucmVwbGFjZSgvRUwgUEFTRU8vaSwgJ0VMUEFTRU8nKTtcbiAgYWRkciA9IGFkZHIucmVwbGFjZSgvTEEgUExBQ0lUQS9pLCAnTEFQTEFDSVRBJyk7XG4gIGFkZHIgPSBhZGRyLnJlcGxhY2UoL0VMIFJBTkNITy9pLCAnRUxSQU5DSE8nKTtcbiAgYWRkciA9IGFkZHIucmVwbGFjZSgvTEEgVkVSRURBL2ksICdMQVZFUkVEQScpO1xuXG4gIGxldCBwb2ludGVyOiBUb2tlbiB8IG51bGwgPSB7XG4gICAgcHJldjogaGVhZCxcbiAgICBuZXh0OiBudWxsLFxuICAgIHZhbHVlOiAnJyxcbiAgICBzZXBhcmF0b3I6IG51bGwsXG4gICAgYWxwaGFzOiAwLFxuICAgIGRlY2ltYWxzOiAwLFxuICAgIGlzRU9MOiBmYWxzZSxcbiAgfTtcblxuICBoZWFkLm5leHQgPSBwb2ludGVyO1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgYWRkci5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IGNoYXIgPSBhZGRyW2ldO1xuICAgIGNvbnN0IG5leHQgPSBhZGRyW2kgKyAxXTtcbiAgICBpZiAoIXBvaW50ZXIpIHsgYnJlYWs7IH1cbiAgICBpZiAobGVnYWxDaGFycy5oYXMoY2hhcikpIHtcbiAgICAgIHBvaW50ZXIudmFsdWUgKz0gY2hhcjtcbiAgICAgIGlmIChhbHBoYXMuaGFzKGNoYXIpKSB7XG4gICAgICAgIHBvaW50ZXIuYWxwaGFzKys7XG4gICAgICB9XG4gICAgICBpZiAoZGVjaW1hbHMuaGFzKGNoYXIpKSB7XG4gICAgICAgIHBvaW50ZXIuZGVjaW1hbHMrKztcbiAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBpZiAobmV3bGluZXMuaGFzKGNoYXIpKSB7IHBvaW50ZXIuaXNFT0wgPSB0cnVlOyB9XG4gICAgICBlbHNlIGlmIChkYXNoZXMuaGFzKGNoYXIpKSB7IHBvaW50ZXIuc2VwYXJhdG9yID0gJy0nOyB9XG4gICAgICBlbHNlIGlmIChjaGFyID09PSAnLicpIHsgcG9pbnRlci5zZXBhcmF0b3IgPSAnLic7IH1cbiAgICAgIGVsc2UgaWYgKGNoYXIgPT09ICcmJykgeyBwb2ludGVyLnNlcGFyYXRvciA9ICcmJzsgfVxuICAgICAgZWxzZSBpZiAoY2hhciA9PT0gJyMnKSB7IHBvaW50ZXIuc2VwYXJhdG9yID0gJyMnOyB9XG4gICAgICBlbHNlIGlmIChzbGFzaGVzLmhhcyhjaGFyKSkgeyBwb2ludGVyLnNlcGFyYXRvciA9ICcvJzsgfVxuICAgICAgLy8gaWYgKCFpc051bWJlck9yQ29kZShwb2ludGVyKSAmJiAhaXNTdGF0ZShwb2ludGVyLnZhbHVlKSAmJiAhaXNTdHJlZXRUeXBlKHBvaW50ZXIudmFsdWUpICYmICFpc0ZhY2lsaXR5VHlwZShwb2ludGVyLnZhbHVlKSAmJiAhaXNVbml0QWJicihwb2ludGVyLnZhbHVlKSkge1xuICAgICAgLy8gICBpZiAoIWRpY3Rpb25hcnkuY2hlY2socG9pbnRlci52YWx1ZSkpIHtcbiAgICAgIC8vICAgICBjb25zdCBzdWdnZXN0aW9ucyA9IGRpY3Rpb25hcnkuc3VnZ2VzdChwb2ludGVyLnZhbHVlKTtcbiAgICAgIC8vICAgICBwb2ludGVyLnZhbHVlID0gc3VnZ2VzdGlvbnNbMF0gfHwgcG9pbnRlci52YWx1ZTtcbiAgICAgIC8vICAgfVxuICAgICAgLy8gfVxuICAgICAgcG9pbnRlci52YWx1ZSA9IGNhcGl0YWxpemUuaGFzKHBvaW50ZXIudmFsdWUudG9VcHBlckNhc2UoKSkgPyBwb2ludGVyLnZhbHVlLnRvVXBwZXJDYXNlKCkgOiB0aXRsZUNhc2UocG9pbnRlci52YWx1ZSk7XG4gICAgICBpZiAobGVnYWxDaGFycy5oYXMobmV4dCkpIHtcbiAgICAgICAgcG9pbnRlciA9IHtcbiAgICAgICAgICBwcmV2OiBwb2ludGVyLFxuICAgICAgICAgIG5leHQ6IG51bGwsXG4gICAgICAgICAgdmFsdWU6ICcnLFxuICAgICAgICAgIHNlcGFyYXRvcjogbnVsbCxcbiAgICAgICAgICBhbHBoYXM6IDAsXG4gICAgICAgICAgZGVjaW1hbHM6IDAsXG4gICAgICAgICAgaXNFT0w6IGZhbHNlLFxuICAgICAgICB9O1xuICAgICAgICBpZiAocG9pbnRlci5wcmV2KSB7XG4gICAgICAgICAgcG9pbnRlci5wcmV2Lm5leHQgPSBwb2ludGVyO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gTm8gbmV3bGluZXMgYWZ0ZXIgdGhlIGxhc3QgU3RhdGUgZGlzY292ZXJlZC5cbiAgd2hpbGUgKHBvaW50ZXIpIHtcbiAgICBpZiAocG9pbnRlci5uZXh0ICYmIGlzU3RhdGUocG9pbnRlci5uZXh0LnZhbHVlKSkge1xuICAgICAgd2hpbGUgKHBvaW50ZXIpIHtcbiAgICAgICAgcG9pbnRlci5pc0VPTCA9IGZhbHNlO1xuICAgICAgICBwb2ludGVyID0gcG9pbnRlci5uZXh0O1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIGlmIChpc0hlYWQocG9pbnRlci5wcmV2KSkgeyBicmVhazsgfVxuICAgIHBvaW50ZXIgPSBwb2ludGVyLnByZXY7XG4gIH1cblxuICAvLyBJdCBpcyBjb21tb24gZm9yIHBlb3BsZSB0byBiZSBzaWxseSBhbmQgcHJlZml4L3N1ZmZpeCBzb21lIHVuaXQgbnVtYmVycyB3aXRoIHRoZXNlIGNvbW1vbiBhYmJyZXZpYXRpb24uXG4gIC8vIEV4OiAxMjMgV2F0ZXIgU3QuIEFwdCBBUFQxLCA0NSBTcHJ1Y2UgQXZlIDFQSFxuICAvLyBUT0RPOiBXZSBjYW4gbWFrZSB0aGlzIG1vcmUgcm9idXN0Li4uXG4gIHBvaW50ZXIgPSBoZWFkLm5leHQ7XG4gIHdoaWxlIChwb2ludGVyKSB7XG4gICAgaWYgKCFwb2ludGVyKSB7IGJyZWFrOyB9XG5cbiAgICBpZiAoaXNPcmRlcihwb2ludGVyLnZhbHVlKSkge1xuICAgICAgcG9pbnRlci52YWx1ZSA9IG9yZGVyVG9PcmRpbmFsKHBvaW50ZXIudmFsdWUpO1xuICAgIH1cblxuICAgIGNvbnN0IHByZWZpeFRlc3QgPSBbIFVuaXRBYmJyLkFQVCwgVW5pdEFiYnIuUEgsIFVuaXRBYmJyLkxWLCBTdHJlZXRUeXBlLlJSLCAnU1VJVEUnLCAnVU5JVCcgXTtcbiAgICBjb25zdCBzdWZmaXhUZXh0ID0gW1VuaXRBYmJyLlBIXTtcblxuICAgIGZvciAoY29uc3QgcHJlZml4IG9mIHByZWZpeFRlc3QpIHtcbiAgICAgIGlmIChwb2ludGVyLnZhbHVlLnRvTG93ZXJDYXNlKCkuc3RhcnRzV2l0aChwcmVmaXgudG9Mb3dlckNhc2UoKSkgJiYgcG9pbnRlci52YWx1ZS5sZW5ndGggPiBwcmVmaXgubGVuZ3RoKSB7XG4gICAgICAgIC8vIFNwZWNpYWwgQ2FzZSBmb3IgcGx1cmFsc1xuICAgICAgICBpZiAocG9pbnRlci52YWx1ZS50b1VwcGVyQ2FzZSgpID09PSBgJHtwcmVmaXgudG9VcHBlckNhc2UoKSAgfVNgKSB7IGNvbnRpbnVlOyB9XG5cbiAgICAgICAgY29uc3Qgb2xkVmFsdWUgPSBwb2ludGVyLnZhbHVlO1xuICAgICAgICBwb2ludGVyLnZhbHVlID0gcG9pbnRlci52YWx1ZS5zbGljZShwcmVmaXgubGVuZ3RoKTtcbiAgICAgICAgcG9pbnRlci5hbHBoYXMgLT0gcHJlZml4Lmxlbmd0aDtcbiAgICAgICAgaWYgKCFpc051bWJlck9yQ29kZShwb2ludGVyKSkge1xuICAgICAgICAgIHBvaW50ZXIuYWxwaGFzICs9IHByZWZpeC5sZW5ndGg7XG4gICAgICAgICAgcG9pbnRlci52YWx1ZSA9IG9sZFZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIGluc2VydFRva2VuQmVmb3JlKHBvaW50ZXIsIHByZWZpeCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBmb3IgKGNvbnN0IHN1ZmZpeCBvZiBzdWZmaXhUZXh0KSB7XG4gICAgICBpZiAocG9pbnRlciAmJiBwb2ludGVyLnZhbHVlLnRvTG93ZXJDYXNlKCkuZW5kc1dpdGgoc3VmZml4LnRvTG93ZXJDYXNlKCkpICYmIHBvaW50ZXIudmFsdWUubGVuZ3RoID4gc3VmZml4Lmxlbmd0aCkge1xuICAgICAgICBjb25zdCBvbGRWYWx1ZSA9IHBvaW50ZXIudmFsdWU7XG4gICAgICAgIHBvaW50ZXIudmFsdWUgPSBwb2ludGVyLnZhbHVlLnNsaWNlKDAsIHN1ZmZpeC5sZW5ndGggKiAtMSk7XG4gICAgICAgIHBvaW50ZXIuYWxwaGFzIC09IHN1ZmZpeC5sZW5ndGg7XG4gICAgICAgIGlmICghaXNOdW1iZXJPckNvZGUocG9pbnRlcikpIHtcbiAgICAgICAgICBwb2ludGVyLmFscGhhcyArPSBzdWZmaXgubGVuZ3RoO1xuICAgICAgICAgIHBvaW50ZXIudmFsdWUgPSBvbGRWYWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICBjb25zdCBuZXdUb2tlbiA9IGluc2VydFRva2VuQWZ0ZXIocG9pbnRlciwgc3VmZml4KTtcbiAgICAgICAgICBwb2ludGVyID0gbmV3VG9rZW47XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcG9pbnRlciA9IHBvaW50ZXIubmV4dDtcbiAgfVxuXG4gIC8vIFNvbWUgbWlzLWZvcm1hdHRlZCBmYWNpbGl0eSBhZGRyZXNzZXMgd2lsbCBwcmVwZW5kIGEgJzAnIHRvIG1ha2UgdGhlbSBhcHBlYXIgbGlrZSBzdHJlZXQgYWRkcmVzc2VzLlxuICBpZiAoaGVhZC5uZXh0ICYmIGhlYWQubmV4dC52YWx1ZSA9PT0gJzAnICYmIGhlYWQubmV4dC5uZXh0KSB7XG4gICAgaGVhZC5uZXh0ID0gaGVhZC5uZXh0Lm5leHQ7XG4gIH1cblxuICByZXR1cm4gaGVhZDtcbn1cblxuLy8gVE9ETzogVXNlIFVTUFMgaHlwaGVuYXRpb24gc3RhbmRhcmRzLlxuZXhwb3J0IGZ1bmN0aW9uIGlzSHlwaGVuYXRlZENvZGUocG9pbnRlcjogVG9rZW4gfCBIZWFkKTogYm9vbGVhbiB7XG4gIGlmIChpc0hlYWQocG9pbnRlcikpIHsgcmV0dXJuIGZhbHNlOyB9XG4gIGlmICghcG9pbnRlci5uZXh0IHx8ICFkYXNoZXMuaGFzKHBvaW50ZXIuc2VwYXJhdG9yIHx8ICcnKSkgeyByZXR1cm4gZmFsc2U7IH1cbiAgcmV0dXJuICEhKGlzTnVtZXJpY2FsKHBvaW50ZXIudmFsdWUpICYmIGlzTnVtZXJpY2FsKChwb2ludGVyLm5leHQgYXMgVG9rZW4pLnZhbHVlKSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc05ld2xpbmVTZXAocG9pbnRlcjogVG9rZW4gfCBIZWFkIHwgbnVsbCk6IGJvb2xlYW4ge1xuICBpZiAoIXBvaW50ZXIgfHwgaXNIZWFkKHBvaW50ZXIpKSB7IHJldHVybiBmYWxzZTsgfVxuICByZXR1cm4gcG9pbnRlcj8uaXNFT0w7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBuZXdsaW5lQ291bnQocG9pbnRlcjogVG9rZW4gfCBIZWFkIHwgbnVsbCk6IG51bWJlciB7XG4gIGxldCBjdXJyZW50OiBUb2tlbiB8IEhlYWQgfCBudWxsID0gcG9pbnRlcjtcbiAgbGV0IGkgPSAwO1xuICB3aGlsZSAoY3VycmVudCkge1xuICAgIGlmIChpc05ld2xpbmVTZXAoY3VycmVudCkpIHsgaSsrOyB9XG4gICAgY3VycmVudCA9IGN1cnJlbnQubmV4dDtcbiAgfVxuICByZXR1cm4gaTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZpbmROZXh0TmV3TGluZShwb2ludGVyOiBUb2tlbiB8IG51bGwpOiBUb2tlbiB8IG51bGwge1xuICBsZXQgY3VycmVudDogVG9rZW4gfCBudWxsID0gcG9pbnRlcjtcbiAgd2hpbGUgKGN1cnJlbnQpIHtcbiAgICBpZiAoaXNOZXdsaW5lU2VwKGN1cnJlbnQpKSB7IHJldHVybiBjdXJyZW50Lm5leHQ7IH1cbiAgICBjdXJyZW50ID0gY3VycmVudC5uZXh0O1xuICB9XG4gIHJldHVybiBudWxsO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaGFzTGF0ZXJTdHJlZXRUeXBlKHBvaW50ZXI6IFRva2VuIHwgbnVsbCwgbGluZU9ubHkgPSBmYWxzZSk6IGJvb2xlYW4ge1xuICBpZiAoIXBvaW50ZXIpIHsgcmV0dXJuIGZhbHNlOyB9XG4gIGlmIChpc05ld2xpbmVTZXAocG9pbnRlcikpIHsgcmV0dXJuIGZhbHNlOyB9XG4gIGxldCBjdXJyZW50OiBUb2tlbiB8IG51bGwgPSBwb2ludGVyLm5leHQ7XG4gIHdoaWxlIChjdXJyZW50KSB7XG4gICAgaWYgKGlzU3RyZWV0VHlwZShjdXJyZW50LnZhbHVlKSkgeyByZXR1cm4gdHJ1ZTsgfVxuICAgIGlmIChsaW5lT25seSAmJiBjdXJyZW50LnNlcGFyYXRvcikgeyBicmVhazsgfVxuICAgIGN1cnJlbnQgPSBjdXJyZW50Lm5leHQ7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaGFzU3RhdGVVbml0KHBvaW50ZXI6IFRva2VuIHwgbnVsbCwgbGluZU9ubHkgPSBmYWxzZSk6IGJvb2xlYW4ge1xuICBsZXQgY3VycmVudDogVG9rZW4gfCBudWxsID0gcG9pbnRlcjtcbiAgd2hpbGUgKGN1cnJlbnQpIHtcbiAgICBpZiAoaXNTdGF0ZShjdXJyZW50LnZhbHVlKSkgeyByZXR1cm4gdHJ1ZTsgfVxuICAgIGlmIChsaW5lT25seSAmJiBjdXJyZW50LnNlcGFyYXRvcikgeyBicmVhazsgfVxuICAgIGN1cnJlbnQgPSBjdXJyZW50Lm5leHQ7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbmV3TGluZUNvdW50KHBvaW50ZXI6IFRva2VuIHwgbnVsbCk6IG51bWJlciB7XG4gIGxldCBjdXJyZW50OiBUb2tlbiB8IG51bGwgPSBwb2ludGVyO1xuICBsZXQgY291bnQgPSAwO1xuICB3aGlsZSAoY3VycmVudCkge1xuICAgIGlmIChpc05ld2xpbmVTZXAoY3VycmVudCkpIHsgY291bnQrKzsgfVxuICAgIGN1cnJlbnQgPSBjdXJyZW50Lm5leHQ7XG4gIH1cbiAgcmV0dXJuIGNvdW50O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc3RyZWV0VHlwZUNvdW50KHBvaW50ZXI6IFRva2VuIHwgbnVsbCk6IG51bWJlciB7XG4gIGxldCBjdXJyZW50OiBUb2tlbiB8IG51bGwgPSBwb2ludGVyO1xuICBsZXQgY291bnQgPSAwO1xuICB3aGlsZSAoY3VycmVudCkge1xuICAgIGlmIChpc1N0cmVldFR5cGUoY3VycmVudC52YWx1ZSkpIHsgY291bnQrKzsgfVxuICAgIGN1cnJlbnQgPSBjdXJyZW50Lm5leHQ7XG4gIH1cbiAgcmV0dXJuIGNvdW50O1xufVxuIl19